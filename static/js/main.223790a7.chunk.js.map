{"version":3,"sources":["img/persik.png","img/search.svg","services/http.js","reducer.js","context.js","core/BtnOutline.js","panels/home/index.js","services/xlsx.js","panels/panel/index.js","panels/list_products/components/item.js","services/words.js","services/filter_products.js","services/httpApiVk.js","panels/list_products/components/last_item.js","panels/list_products/index.js","services/types.js","App.js","index.js"],"names":["module","exports","fetchClient","axios","create","baseURL","http","get","uri","queryParams","a","params","post","data","JSON","stringify","state","action","type","activePanel","payload","indicators","popout","error","fetchedUser","btn","Object","values","join","types","products","filteredProducts","isOverflow","panelOverflow","Context","React","createContext","BtnOutline","props","size","level","onClick","handleClick","className","active","data-to","data_to","children","Home","dispatch","useContext","id","e","currentTarget","dataset","to","getXLS","request","url","method","responseType","headers","Accept","then","response","Uint8Array","workbook","XLSX","typesWorksheet","Sheets","SheetNames","productsWorksheet","sheet_to_json","console","log","osName","platform","PanelItem","eventDisableYoung","eventDisableOld","professionDisableOld","professionDisableYoung","ageDisable","find","age","sexDisable","sex","buttons","filter","val","event","map","key","setIndicators","to_id","back_id","IOS","title","Product","memo","product","count","item","give","buy","style","position","zIndex","placeholder","src","img_url","persik","alt","firstUpperCaseTrim","string","trim","s","toUpperCase","slice","replace","typeHow","filterProducts","lastFilter","undefined","how","charAt","img","isHow","isSex","isAge","productsWithLink","link","sort","Math","random","productsWithoutLink","length","split","i","isEvent","isHobby","hobby","isProfession","profession","isRelation","relation","access_token","httpApiVk","assign","jsonp","fn","photos","LastItem","again","redirectSiberiaHandmade","search","ListProducts","useState","slideIndex","setSlide","name","bridge","supports","send","img_fullname","helpGive","window","parent","location","getImgs","err","message","forEach","photo","includes","sizes","useEffect","String","countProducts","currentProduct","ref","element","root","document","getElementById","getBoundingClientRect","height","scrollHeight","before","width","align","onChange","data-product","data-name","getTypes","typesXlsx","keys","str","push","Set","initialState","bdate","city","country","first_name","last_name","photo_100","photo_200","photo_max_orig","timezone","App","useReducer","reducer","sendPromise","user","subscribe","detail","createAttribute","fetchUser","fetchData","Provider","value","withHeader","result","hasOwnProperty","getRelationsAtSex","ReactDOM","render"],"mappings":"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","file":"static/js/main.223790a7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/persik.4e1ec840.png\";","module.exports = __webpack_public_path__ + \"static/media/search.2ac4e6f4.svg\";","import axios from 'axios';\r\n//todo переделать на нормальный сервер для логов\r\n\r\n// const baseURL = 'http://localhost/liftlab/www/some/ajax/'\r\nconst baseURL = process.env.NODE_ENV !== 'development' ? 'https://cors-anywhere.herokuapp.com/http://151.237.175.72:8085/some/ajax/' : ''\r\n\r\n\r\nconst fetchClient = axios.create({\r\n    baseURL: baseURL,\r\n});\r\n\r\nexport default class http {\r\n\r\n    static get = async (uri, queryParams) => {\r\n        try {\r\n            return await fetchClient.get(uri, {params: queryParams});\r\n        } catch (e) {\r\n            return e;\r\n        }\r\n    }\r\n\r\n    static post = async (uri, data) => {\r\n        // const instance = fetchClient();\r\n        try {\r\n            return await fetchClient.post(uri, JSON.stringify(data));\r\n        } catch (e) {\r\n            return e;\r\n        }\r\n    };\r\n\r\n}\r\n","import http from './services/http'\r\n\r\nexport default (state, action) => {\r\n    switch (action.type) {\r\n        case \"setActivePanel\":\r\n            return {\r\n                ...state,\r\n                activePanel: action.payload.activePanel,\r\n                indicators: {\r\n                    ...state.indicators,\r\n                    ...action.payload.data\r\n                }\r\n            };\r\n        case \"setPopout\":\r\n            return {\r\n                ...state,\r\n                popout: action.payload.popout,\r\n                error: action.payload.error\r\n            }\r\n        case \"setUser\":\r\n            http.post('writeHandMade', {'msg':\r\n            // Пользователь ${action.payload.fetchedUser.id}\r\n            `. Зашел.`})\r\n            return {\r\n                ...state,\r\n                fetchedUser: action.payload.fetchedUser,\r\n                popout: action.payload.popout\r\n            }\r\n        case \"setIndicators\":\r\n          const btn = Object.values(action.payload.data).join('.');\r\n            http.post('writeHandMade', {'msg':\r\n                // Пользователь ${state.fetchedUser.id}.\r\n                    `Выбрал. ${btn}`})\r\n            return {\r\n                ...state,\r\n                activePanel: action.payload.activePanel,\r\n                indicators: {\r\n                    ...state.indicators,\r\n                    ...action.payload.data\r\n                }\r\n            }\r\n        case \"setTypes\":\r\n            return {\r\n                ...state,\r\n                types: action.payload.types,\r\n                popout: action.payload.popout\r\n            }\r\n        case \"getAllProducts\":\r\n            return {\r\n                ...state,\r\n                products: action.payload.products,\r\n                popout: action.payload.popout\r\n            }\r\n        case \"getFilteredProducts\":\r\n            return {\r\n                ...state,\r\n                filteredProducts: action.payload.filteredProducts,\r\n                popout: action.payload.popout\r\n            }\r\n        case \"setOverflow\":\r\n            return {\r\n                ...state,\r\n                isOverflow: action.payload.isOverflow,\r\n                panelOverflow: action.payload.panelOverflow,\r\n            }\r\n        default:\r\n            return {\r\n                ...state,\r\n                error: \"Такого метода не существует!\"\r\n            }\r\n    }\r\n}","import React from 'react'\r\n\r\nexport const Context = React.createContext()","import Button from \"@vkontakte/vkui/dist/components/Button/Button\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n\r\nconst BtnOutline = props => (\r\n    <Button size='l' level=\"outline\" onClick={props.handleClick} className={props.active ? \"btn-primary\" : \"btn-white\"}\r\n            data-to={props.data_to}>\r\n        {props.children}\r\n    </Button>\r\n);\r\n\r\nBtnOutline.propTypes = {\r\n    data_to: PropTypes.string.isRequired,\r\n    handleClick: PropTypes.func.isRequired,\r\n    active: PropTypes.bool\r\n};\r\n\r\nexport default BtnOutline;","import React, {useContext} from 'react'\r\nimport {Context} from './../../context'\r\nimport PropTypes from 'prop-types';\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\r\nimport BtnOutline from \"../../core/BtnOutline\";\r\n//import arrow from './../../img/arrow.svg'\r\nimport  '../../../node_modules/animate.css/animate.css';\r\n\r\nconst Home = (props) => {\r\n\r\n    const {dispatch} = useContext(Context);\r\n\r\n    const go = e => {\r\n\r\n        dispatch({\r\n            type: 'setActivePanel',\r\n            payload: {\r\n                activePanel: e.currentTarget.dataset.to,\r\n            }\r\n        })\r\n    };\r\n\r\n   return <div id={props.id} className='wrapper '>\r\n       <div className={'home'}>\r\n        {/*{fetchedUser &&*/}\r\n        {/*<Group title=\"User Data Fetched with VK Connect\">*/}\r\n        {/*    <Cell*/}\r\n        {/*        before={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}*/}\r\n        {/*        description={fetchedUser.city && fetchedUser.city.title ? fetchedUser.city.title : ''}*/}\r\n        {/*    >*/}\r\n        {/*        {`${fetchedUser.first_name} ${fetchedUser.last_name}`}*/}\r\n        {/*    </Cell>*/}\r\n        {/*</Group>}*/}\r\n\r\n\r\n        <Div className='title'>\r\n            Не знаешь,<br/>что подарить?\r\n        </Div>\r\n        <Div className='text'>\r\n            Воспользуйся нашим сервисом<br/>и получи идеи для подарка!\r\n        </Div>\r\n       {/* <img src={arrow} className={'arrow'}/>  // убрал стрелку */} \r\n        <Div className='homeBtn'>\r\n        <BtnOutline data_to=\"how\" handleClick={go}>\r\n            Найти подарок!\r\n        </BtnOutline>\r\n        </Div>\r\n    </div>\r\n    </div>\r\n}\r\n\r\nHome.propTypes = {\r\n    id: PropTypes.string.isRequired,\r\n    // go: PropTypes.func.isRequired,\r\n    // fetchedUser: PropTypes.shape({\r\n    //     photo_200: PropTypes.string,\r\n    //     first_name: PropTypes.string,\r\n    //     last_name: PropTypes.string,\r\n    //     city: PropTypes.shape({\r\n    //         title: PropTypes.string,\r\n    //     }),\r\n    // }),\r\n};\r\n\r\nexport default Home;\r\n","import * as XLSX from 'xlsx';\r\nimport axios from \"axios\";\r\n\r\nexport const urlXlsxGoogle = \"https://docs.google.com/spreadsheets/d/1Oikpp2P8Tp4I8s4gIJEjK4rnR4WRIoG8SMyawtCifSs/export?format=xlsx\";\r\n// export const urlXlsxGoogleWrite = \"https://docs.google.com/spreadsheets/d/1Oikpp2P8Tp4I8s4gIJEjK4rnR4WRIoG8SMyawtCifSs/\";\r\n\r\nexport const getXLS = () => {\r\n    return axios.request({\r\n        url: urlXlsxGoogle,\r\n        method: 'get',\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n        },\r\n    }).then((response) => {\r\n\r\n        const data = new Uint8Array(response.data);\r\n        const workbook = XLSX.read(data, {type: \"array\"});\r\n        const typesWorksheet = workbook.Sheets[workbook.SheetNames[0]];\r\n        const productsWorksheet = workbook.Sheets[workbook.SheetNames[1]];\r\n        const types = XLSX.utils.sheet_to_json(typesWorksheet);\r\n        const products = XLSX.utils.sheet_to_json(productsWorksheet);\r\nconsole.log(types);\r\n        return {types: types, products: products}\r\n    });\r\n}\r\n\r\n// export const logXlsx = ()=> {\r\n//     const wopts = {bookType: 'xlsx', bookSST: false, type: 'base64'};\r\n//\r\n//     axios.request({\r\n//         url: urlXlsxGoogleWrite,\r\n//         method: 'post',\r\n//         // headers: {\r\n//         //     Accept: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n//         // })\r\n//         data: JSON.stringify({\r\n//             \"range\": 'A1',\r\n//             \"values\": wopts\r\n//\r\n//         })\r\n//     }).then((response) => {\r\n//\r\n//     }).catch(err=>{\r\n//\r\n//     })\r\n// }","import React, {useContext} from 'react';\r\nimport PropTypes, { object } from 'prop-types';\r\nimport {IOS, platform, Button} from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nimport './../../style.css';\r\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\r\nimport BtnOutline from \"../../core/BtnOutline\";\r\nimport {Context} from \"../../context\";\r\nimport '../../../node_modules/animate.css/animate.css';\r\n\r\n\r\n\r\nconst osName = platform();\r\n\r\nconst PanelItem = props => {\r\n    const {state, dispatch} = useContext(Context)\r\n\r\n    const setIndicators = (e, data) => {\r\n        dispatch({\r\n            type: 'setIndicators',\r\n            payload: {\r\n                data: data,\r\n                activePanel: e.currentTarget.dataset.to,\r\n            }\r\n        })\r\n    };\r\n\r\n    const go = e => {\r\n\r\n        dispatch({\r\n            type: 'setActivePanel',\r\n            payload: {\r\n                data: {[props.id]: null},\r\n                activePanel: e.currentTarget.dataset.to,\r\n            }\r\n        })\r\n    };\r\n    //'profession' От 0 до 5 лет  = Айтишнику Банкиру Бармену Бизнес-тренеру Визажисту Военному Воспитателю Доктору Методисту \r\n    // Моряку Парикмахеру Продавцу Стилисту Стоматологу Строителю Таксисту Тренеру Фитнес-тренеру Фотографу Художнику Швее Шоферу Юристу\r\n\r\n    //'profession' 'От 11 до 16 лет' = Банкиру Бармену Бизнес-тренеру Визажисту Воспитателю Методисту Парикмахеру Стилисту Стоматологу Тренеру Швее Юристу\r\n    //(props.id == 'event') && props.types.filter((val) => val !== 'Kорпоратив')\r\n\r\n    // список исключений 'event'\r\n    const eventDisableYoung = ['На Свадьбу','Девишник','Свадьба','Рождение ребенка','На рождение ребенка','На мальчишник','На корпоратив','На Свадьба','Мальчишник','Корпоратив','Автоледи'];\r\n    const eventDisableOld = ['Выпускной детский сад'];\r\n\r\n     const professionDisableOld = ['Банкиру','Бармену','Бизнес-тренеру','Визажисту','Воспитателю','Методисту','Парикмахеру','Стилисту','Стоматологу','Тренеру','Швее','Юристу'];\r\n     const professionDisableYoung = ['Айтишнику','Банкиру','Бармену','Бизнес-тренеру','Визажисту','Военному','Воспитателю','Доктору','Методисту','Моряку','Парикмахеру',\r\n     'Продавцу','Стилисту','Стоматологу','Строителю','Таксисту','Тренеру','Фитнес-тренеру','Фотографу','Художнику','Швее','Шоферу','Юристу'];\r\n    \r\n    //исключение возраста \r\n    const ageDisable = !!['От 0 до 5 лет', 'От 6 до 10 лет'].find(age => age === state.indicators.age);\r\n    console.log(ageDisable);\r\n    //const ageDisableOld = !!['От 11 до 16 лет','От 17 до 20 лет','От 21 до 30 лет','От 31 и старше'].find(age => age === state.indicators.age);\r\n\r\n    const sexDisable = !!['Мужчине'].find(sex => sex === state.indicators.sex);\r\n\r\n    \r\n\r\n    // //проверка в списке событие на рабочие кнопки \r\n    // const typesEvent = (props.id == 'event')\r\n    // ?  props.types.filter((val) => {\r\n    //     //console.log(ageDisable ? !eventDisableYoung.find((event)=> event === val) : !eventDisableOld.find((event)=> event === val));\r\n    //     return ageDisable ? !eventDisableYoung.find((event)=> event === val) : !eventDisableOld.find((event)=> event === val)}) \r\n    // : props.types\r\n    \r\n    // // пeроверка в списке увлечение на рабочие кнопки \r\n    // const typesHobby = (props.id == 'hobby') \r\n    // ? props.types.filter((val) => {\r\n    //     //console.log(sexDisable ? !eventDisableYoung.find((event) => event === val) : val);\r\n    //     return sexDisable ? !eventDisableYoung.find((event) => event === val) : val})\r\n    // : props.types\r\n\r\n    // //пeроверка в списке профессия на рабочие кнопки  \r\n    // const typesProfession = (props.id == 'profession')\r\n    // ? props.types.filter((val) => {\r\n    //     return ageDisable ? !professionDisableYoung.find((event)=> event === val) : !professionDisableOld.find((event)=> event === val)})\r\n    // : props.types\r\n\r\n\r\n    //проверка в списках на рабочие кнопки\r\n    const types = props.types.filter((val) => {\r\n        switch (props.id) {\r\n            case 'event' : return ageDisable ? !eventDisableYoung.find((event)=> event === val) : !eventDisableOld.find((event)=> event === val) \r\n            case 'hobby' : return sexDisable ? !eventDisableYoung.find((event) => event === val) : val\r\n            case 'profession' : return ageDisable ? !professionDisableYoung.find((event)=> event === val) : !professionDisableOld.find((event)=> event === val)\r\n            default: return true\r\n        }\r\n    \r\n    })\r\n\r\n   \r\n\r\n    const buttons = types.map((val) => <BtnOutline key={val}\r\n                                                    handleClick={(e) => setIndicators(e, {[props.id]: val})}\r\n                                                    data_to={props.to_id}\r\n                                                    active={state.indicators[props.id] === val}>\r\n        {val}\r\n    </BtnOutline>)\r\n    \r\n    const refCallback = element => {\r\n        if (element) {\r\n            const root = document.getElementById('root')\r\n            const isOverflow = element.getBoundingClientRect().bottom + 20 > root.scrollHeight\r\n            if (state.isOverflow !== isOverflow && state.panelOverflow !== state.activePanel) {\r\n                dispatch({\r\n                    type: 'setOverflow',\r\n                    payload: {\r\n                        isOverflow: isOverflow,\r\n                        panelOverflow: state.activePanel\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    };\r\n\r\n    console.log(state);// вся доступная инфа \r\n    console.log(props); // выбраные страницы \r\n    return <div className={'wrapper'} id={props.id}>\r\n        {/*<PanelHeader className={'header'} left={*/}\r\n        {/*    <HeaderButton onClick={go} data-to={props.back_id}>*/}\r\n        {/*        {osName === IOS ?ChevronBack/> : <Icon24Back/>}*/}\r\n        {/*    </HeaderButton>}*/}\r\n        {/*>*/}\r\n        {/*    <Div>{props.title}</Div>*/}\r\n        {/*</PanelHeader>*/}\r\n        <div className={'panel'}>\r\n            <Div className={'header'}>\r\n                <button className={'btn-back'} onClick={go} data-to={props.back_id}>\r\n                    {osName === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n                </button>\r\n                <Div className={'header-title'}>{props.title}</Div>\r\n            </Div>\r\n\r\n            <Div className='content'>\r\n                <div className={'btn-wrap'} >\r\n                    <div className= {'styleButtons'}>{buttons}</div> \r\n                    {/* <div style= {{overflowY:'scroll', flexDirection:'column', display:'flex', height: '70vh'}}>{buttons} </div> */}\r\n\r\n                    {/* {buttons} */}\r\n                </div>\r\n            </Div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nPanelItem.propTypes = {\r\n    id: PropTypes.string.isRequired,\r\n    withHeader: PropTypes.bool,\r\n    back_id: PropTypes.string,\r\n    to_id: PropTypes.string.isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    types: PropTypes.array.isRequired\r\n};\r\n\r\nexport default PanelItem;\r\n","import React from 'react'\r\nimport persik from \"../../../img/persik.png\";\r\nimport PropTypes from 'prop-types';\r\nimport ScreenSpinner from \"@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner\";\r\n\r\n\r\nconst Product = React.memo(props => {\r\n    const {product, count, item, give, buy} = props\r\n    console.log(props);\r\n    console.log(product);\r\n\r\n    return (\r\n        <div className=\"product\">\r\n            {/* <div className=\"svg-image\"></div> */}\r\n            <div style= {{position: 'absolute', zIndex: -1}}><ScreenSpinner size='medium'/></div>\r\n            <div className={'img-wrap'}>\r\n                \r\n                <img placeholder=\"\" className=\"img-product\" src={product.img_url || persik} alt=\"Persik The Cat\"/>\r\n            </div>\r\n            {/*<div>*/}\r\n            {/*    <Button size='l' level=\"outline\" className=\"btn-white\" data-product={product.id} data-name={product.name} onClick={e=>buy(e)}>Где купить?</Button>*/}\r\n            {/*    <Button size='l' level=\"outline\" className=\"btn-white\" onClick={e=>give(e, product)}>Хочу себе!</Button>*/}\r\n            {/*</div>*/}\r\n        </div>\r\n    )\r\n})\r\n\r\nProduct.propTypes = {\r\n    product: PropTypes.shape({\r\n        name: PropTypes.string.isRequired,\r\n        // img_url: PropTypes.string.isRequired,\r\n        id: PropTypes.string.isRequired\r\n    }),\r\n    count: PropTypes.number.isRequired,\r\n    item: PropTypes.number.isRequired,\r\n    // buy : PropTypes.func.isRequired,\r\n    // give: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Product\r\n\r\n\r\n","export const firstUpperCaseTrim = (string) => {\r\n    if(!string|| !string.trim()) return '';\r\n    const s = string.trim();\r\n    return (s[0].toUpperCase() + s.slice(1)).replace(/  /g, ' ')\r\n}","import {firstUpperCaseTrim} from \"./words\";\r\n\r\nexport const typeHow = {\r\n    'По увлечениям': 'hobby',\r\n    'По профессии': 'profession',\r\n    'Родственнику': 'relation',\r\n    'На событие': 'event',\r\n}\r\n\r\n\r\nexport default class filterProducts {\r\n\r\n    static indicators;\r\n\r\n    static filter = (products, indicators) => {\r\n        this.indicators = indicators;\r\n        const filteredProducts = products.filter((product) => {\r\n            const lastFilter = typeHow[this.indicators.how] === undefined ? true : this[`is${typeHow[this.indicators.how].charAt(0).toUpperCase()}${typeHow[this.indicators.how].slice(1)}`](product);\r\n            // console.log('product-- ', product.id, product);\r\n            if (!product.img || !product.img.trim() || !product.active) return false;\r\n            return this.isHow(product) && this.isSex(product) && this.isAge(product) && lastFilter\r\n        })\r\n\r\n        const productsWithLink = filteredProducts.filter((product) => {\r\n            return !!product.link\r\n        }).sort(function () {\r\n            return .5 - Math.random()\r\n        }).slice(0, 10);\r\n\r\n        const productsWithoutLink = filteredProducts.filter((product) => {\r\n            return !product.link\r\n        }).sort(function () {\r\n            return .5 - Math.random()\r\n        }).slice(0, 15-productsWithLink.length);\r\n\r\n        const result = [...productsWithLink, ...productsWithoutLink];\r\n        return result;\r\n    }\r\n\r\n    // static isActive = (product) => {\r\n    //     if (product.active === undefined) return true; \r\n    //     return \r\n    // }\r\n\r\n    static isHow = (product) => {\r\n        if (product.how === undefined) return true;\r\n        const how = product.how.split(',').filter((i) => this.indicators.how === firstUpperCaseTrim(i))\r\n        // console.log('product.how-- ', product.how,how.length > 0);\r\n        return how.length > 0;\r\n    }\r\n\r\n    static isSex = (product) => {\r\n        if (product.sex === undefined) return true;\r\n        const sex = product.sex.split(',').filter((i) => this.indicators.sex === firstUpperCaseTrim(i))\r\n        // console.log('product.sex-- ', product.sex,sex.length > 0);\r\n        return sex.length > 0;\r\n    }\r\n\r\n    static isAge = (product) => {\r\n         console.log('product.age-- ', product);\r\n        if (product.age === undefined) return true;\r\n        const age = product.age.split(',').filter((i) => this.indicators.age === firstUpperCaseTrim(i))\r\n        //console.log('product.age-- ', product.age);\r\n        return age.length > 0;\r\n    }\r\n\r\n    static isEvent = (product) => {\r\n        // console.log('product.event-- ', product.event);\r\n        if (product.event === undefined) return true;\r\n        const event = product.event.split(',').filter((i) => this.indicators.event === firstUpperCaseTrim(i))\r\n        // console.log('product.event-- ', product.event,event.length > 0);\r\n        return event.length > 0;\r\n    }\r\n    \r\n    static isHobby = (product) => {\r\n        // console.log('product.hobby-- ', product.hobby);\r\n        if (product.hobby === undefined) return true;\r\n        const hobby = product.hobby.split(',').filter((i) => this.indicators.hobby === firstUpperCaseTrim(i))\r\n        return hobby.length > 0;\r\n    }\r\n\r\n    static isProfession = (product) => {\r\n        // console.log('product.profession-- ', product.profession);\r\n        if (product.profession === undefined) return true;\r\n        const profession = product.profession.split(',').filter((i) => this.indicators.profession === firstUpperCaseTrim(i))\r\n        return profession.length > 0;\r\n    }\r\n\r\n    static isRelation = (product) => {\r\n        // console.log('product.relation-- ', product.relation);\r\n        if (product.relation === undefined) return true;\r\n        const relation = product.relation.split(',').filter((i) => this.indicators.relation === firstUpperCaseTrim(i))\r\n        return relation.length > 0;\r\n    }\r\n}\r\n// id,active,name,img,sex,how,relation,profession,hobby,event,age,link,description\r\n\r\n// [0: {active: \"1\", name: \"Скетчбук в авторской обложке\", img: \"457241933, 457241935, 457241932, 457241934 \", how: \"1,3,4\", relation: \"3, 4, 6, 10, 11, 13\", hobby: \"7\", …}]\r\n\r\n// how: \"\"\r\n// sex: null\r\n// age: null\r\n// event: null\r\n// hobby: null\r\n// profession: null\r\n// relation: null\r\n// active: '1'\r\n","import axios from 'axios';\r\nimport jsonp from 'jsonp';\r\n\r\n// const env = process.env.NODE_ENV !== 'production' ? 'ords' : 'dev';\r\n\r\n// const uriImg = `https://api.vk.com/method/photos.getById?access_token=470c6262470c6262470c62624a476171c74470c470c62621a81abc51a6bc2a2df1c0664`;\r\nconst baseURL = 'https://api.vk.com/method/'\r\nconst access_token = `470c6262470c6262470c62624a476171c74470c470c62621a81abc51a6bc2a2df1c0664`;\r\nexport const handmade_id = `176551026`;\r\n\r\nconst params = {\r\n    access_token: access_token,\r\n}\r\n\r\nconst fetchClient = axios.create({\r\n    baseURL: baseURL,\r\n});\r\n\r\nexport default class httpApiVk {\r\n\r\n    static get = async (uri, queryParams) => {\r\n        try {\r\n            return await fetchClient.get(uri, {params: Object.assign(queryParams, params)});\r\n        } catch (e) {\r\n            return e;\r\n        }\r\n    }\r\n\r\n    static post = async (uri, data) => {\r\n        // const instance = fetchClient();\r\n        try {\r\n            return await fetchClient.post(uri, data);\r\n        } catch (e) {\r\n            return e;\r\n        }\r\n    };\r\n\r\n    static jsonp = async (uri, queryParams, fn) => {\r\n        const url = `${baseURL}${uri}?access_token=${access_token}&photos=${queryParams.photos}&extended=0&photo_sizes=0&v=5.101`;\r\n        await jsonp(url, null, fn);\r\n    }\r\n}\r\n","import React from 'react'\r\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\r\nimport PropTypes from 'prop-types';\r\nimport search from './../../../img/search.svg'\r\n\r\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\r\n\r\nconst LastItem = props => {\r\n    const { again, redirectSiberiaHandmade}= props\r\n    return (\r\n        <div className=\"product\">\r\n            <div className=\"lastProduct\">\r\n<img src={search} className={'img-search'} /* width={150} height={200} *//>\r\n            <div>\r\n                <Button size='l' level=\"outline\" className=\"btn-white\" onClick={again}>Попробовать еще раз!</Button>< br /> \r\n                <Button size='l' level=\"outline\" className=\"btn-white\" onClick={redirectSiberiaHandmade}>Подберите мне подарок!</Button>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nLastItem.propTypes = {\r\n    again: PropTypes.func.isRequired,\r\n    redirectSiberiaHandmade: PropTypes.func.isRequired\r\n};\r\n\r\nexport default LastItem\r\n\r\n\r\n","import React, {useContext, useEffect, useState} from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport {IOS, platform} from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport './../../style.css';\r\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\r\nimport Gallery from \"@vkontakte/vkui/dist/components/Gallery/Gallery\";\r\nimport CellButton from \"@vkontakte/vkui/dist/components/CellButton/CellButton\";\r\nimport Icon24BrowserBack from '@vkontakte/icons/dist/24/browser_back';\r\nimport Icon24BrowserForward from '@vkontakte/icons/dist/24/browser_forward';\r\nimport {Context} from \"../../context\";\r\nimport Product from \"./components/item\";\r\nimport filterProducts from \"../../services/filter_products\";\r\nimport httpApiVk, {handmade_id} from \"../../services/httpApiVk\";\r\nimport http from '../../services/http'\r\nimport LastItem from \"./components/last_item\";\r\n//import connect from '@vkontakte/vk-connect';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\r\n\r\nconst osName = platform();\r\n\r\nconst uriImg = 'photos.getById';\r\n\r\nconst ListProducts = props => {\r\n    const [slideIndex, setSlide] = useState(0);\r\n    // const slideIndex = useState(0);\r\n    const {state, dispatch} = useContext(Context)\r\n    let filteredProducts = {};\r\n\r\n    const go = e => {\r\n        dispatch({\r\n            type: 'setActivePanel',\r\n            payload: {\r\n                activePanel: props.back_id,\r\n            }\r\n        })\r\n    };\r\n\r\n    const give = async (e, product) => {\r\n        // const productPhoto = product.name;\r\n        // const btn = e.currentTarget.innerText;\r\n        await http.post('writeHandMade', {\r\n            'msg':\r\n            //Пользователь ${state.fetchedUser.id}.\r\n                `Нажал: Хочу себе. Идея: ${product.id}-${product.name}.`\r\n        })\r\n\r\n        if (bridge.supports(\"VKWebAppShowWallPostBox\")) {\r\n            bridge.send(\"VKWebAppShowWallPostBox\", {\r\n                \"message\": `Сервис поиска подарков! Хочу себе ${product.name}!`,\r\n                \"attachments\": `photo${product.img_fullname}, https://vk.com/siberia_handmade`\r\n            })\r\n        }\r\n    };\r\n\r\n    const helpGive = async (e, product) => {\r\n        http.post('writeHandMade', {\r\n            'msg':\r\n            //Пользователь ${state.fetchedUser.id}.\r\n                `Нажал: Где купить.Помогите найти.Идея: ${product.id}-${product.name}.`\r\n        })\r\n        if (bridge.supports(\"VKWebAppShowWallPostBox\")) {\r\n            bridge.send(\"VKWebAppShowWallPostBox\", {\r\n                \"message\": `Где купить\\\\заказать: ${product.name}! Помогите найти! https://vk.com/siberia_handmade`,\r\n                \"attachments\": `photo${product.img_fullname}, https://vk.com/siberia_handmade`\r\n            })\r\n        }\r\n    };\r\n\r\n    const buy = async (e, product) => {\r\n        await http.post('writeHandMade', {\r\n            'msg':\r\n            // Пользователь ${state.fetchedUser.id}.\r\n                `Нажал: Где купить?. Идея: ${product.id}-${product.name}.`\r\n        })\r\n        window.parent.location = !!product.link ? product.link : 'https://vk.com/siberia_handmade?w=app6887721_-176551026';\r\n    };\r\n\r\n    const again = e => {\r\n        // console.log('again-- ');\r\n        http.post('writeHandMade', {\r\n            'msg':\r\n            // Пользователь ${state.fetchedUser.id}.\r\n                `Нажал: Попробовать еще раз!.`\r\n        })\r\n        dispatch({\r\n            type: 'setActivePanel',\r\n            payload: {\r\n                activePanel: 'home',\r\n            }\r\n        })\r\n    };\r\n    const redirectSiberiaHandmade = e => {\r\n        // console.log('redirectSiberiaHandmade-- ');\r\n        http.post('writeHandMade', {\r\n            'msg':\r\n            // Пользователь ${state.fetchedUser.id}.\r\n                `Нажал: Подберите мне подарок.`\r\n        })\r\n        window.parent.location = 'https://vk.com/siberia_handmade?w=app6887721_-176551026';\r\n    };\r\n\r\n    const getImgs = (err, data) => {\r\n        if (err) {\r\n            console.error(\"ERROR get images\", err.message);\r\n            dispatch({\r\n                type: 'setPopout',\r\n                payload: {\r\n                    popout: false,\r\n                    error: \"Ошибка подключения к серверу ВК!\"\r\n                }\r\n            })\r\n        } else {\r\n            // console.log('data-- ', data);\r\n            // console.log('filteredProducts-- ', filteredProducts);\r\n            filteredProducts.map((product) => {\r\n                data.response.forEach(function (photo) {\r\n                    if (!!product.img && product.img.includes(photo.id)) {\r\n                        product.img_url = photo.sizes[4].url\r\n                    }\r\n                })\r\n                return product\r\n            })\r\n            dispatch({\r\n                type: 'getFilteredProducts',\r\n                payload: {\r\n                    filteredProducts: filteredProducts,\r\n                    popout: false,\r\n                }\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    //filter products\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: 'setPopout',\r\n            payload: {\r\n                popout: true,\r\n            }\r\n        })\r\n\r\n        function filter() {\r\n            // console.log('prod',state.products,state.indicators,handmade_id);\r\n\r\n            filteredProducts = filterProducts.filter(state.products, state.indicators);\r\n            const photos = filteredProducts.map((product) => {\r\n                // console.log('proddd',product.img);\r\n                if (!product.img) return '';\r\n                product.img_fullname = `-${handmade_id}_${String(product.img).split(',')[0].trim()}`\r\n                return product.img_fullname\r\n                // ((img_id) => {\r\n                //     return `-${handmade_id}_${img_id.trim()}`\r\n                // }).join(',')\r\n            }).filter(img => !!img).join(',')\r\n            // console.log('photos-- ', photos);\r\n            if (!!photos) {\r\n                httpApiVk.jsonp(uriImg, {photos: photos}, getImgs)\r\n            } else {\r\n                //console.log(dispatch);\r\n                dispatch({\r\n                    type: 'getFilteredProducts',\r\n                    payload: {\r\n                        filteredProducts: filteredProducts,\r\n                        popout: false,\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n        filter();\r\n    }, []);\r\n\r\n    const refCallback = element => {\r\n        if (element) {\r\n            const root = document.getElementById('root')\r\n            const isOverflow = element.getBoundingClientRect().height > root.scrollHeight\r\n            // console.log('log-- ',element.getBoundingClientRect().height, root.scrollHeight );\r\n            // console.log('isOverflow-- ',element.getBoundingClientRect().height > root.scrollHeight);\r\n            if (state.isOverflow !== isOverflow && state.panelOverflow !== state.activePanel) {\r\n                dispatch({\r\n                    type: 'setOverflow',\r\n                    payload: {\r\n                        isOverflow: isOverflow,\r\n                        panelOverflow: state.activePanel\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    const countProducts = state.filteredProducts.length;\r\n    const products = state.filteredProducts.map((product, i) => <Product key={i} item={++i}\r\n                                                                         product={product}\r\n                                                                         count={countProducts}/>)\r\n\r\n    //console.log('countProducts-- ', products);\r\n    // console.log('state.filteredProducts-- ', state.filteredProducts);\r\n    const item = slideIndex + 1;\r\n    const currentProduct = state.filteredProducts[slideIndex];\r\n    const title = currentProduct && currentProduct.name;\r\n    return <div className={'wrapper'} id={props.id}>\r\n        <div className={'panel'}>\r\n            <Div className={'header'}>\r\n                <button className={'btn-back'} onClick={go} data-to={props.back_id}>\r\n                    {osName === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n                </button>\r\n                <Div\r\n                    className={'header-title'}>{(!!countProducts && countProducts !== slideIndex) ? `${item} из ${countProducts}: ${title}` : \"Не нашли что искали?\"}</Div>\r\n            </Div>\r\n            <div className={'container-items'} ref={refCallback}>\r\n                <div className={'block-items'}>\r\n                    <div className={'slider-wrap'}>\r\n                        {!!countProducts && slideIndex !== 0 &&\r\n                        <CellButton className={\"slider-btn slider-btn-left\"}\r\n                                    onClick={() => setSlide(slideIndex === 0 ? 0 : slideIndex - 1)}\r\n                                    before={<Icon24BrowserBack width={40} height={40}/>}/>}\r\n                        <div className={\"slider-gallery\"}>\r\n                            <Gallery\r\n                                className={\"gallery\"}\r\n                                // slideWidth=\"98%\"\r\n                                align=\"center\"\r\n                                // style={{height: 150}}\r\n                                slideIndex={slideIndex}\r\n                                onChange={slideIndex => setSlide(slideIndex)}\r\n                            >\r\n                                {products}\r\n                                <LastItem again={again} redirectSiberiaHandmade={redirectSiberiaHandmade}/>\r\n\r\n                            </Gallery>\r\n                        </div>\r\n                        {!!countProducts && countProducts !== slideIndex &&\r\n                        <CellButton className={\"slider-btn slider-btn-right\"} onClick={() => setSlide(slideIndex + 1)}\r\n                                    before={<Icon24BrowserForward width={40} height={40}/>}/>}\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {(!!countProducts && countProducts !== slideIndex) && <div className={'btn-wrap-items'}>\r\n                <Button size='l'\r\n                        level=\"outline\"\r\n                        className=\"btn-white\"\r\n                        data-product={currentProduct.id}\r\n                        data-name={currentProduct.name}\r\n                        onClick={e => {\r\n                            currentProduct.link ? buy(e, currentProduct) : helpGive(e, currentProduct)\r\n                        }}\r\n                >Где купить?</Button>\r\n                <Button size='l'\r\n                        level=\"outline\"\r\n                        className=\"btn-white\"\r\n                        onClick={e => give(e, currentProduct)}\r\n                >Хочу себе!</Button>\r\n            </div>}\r\n        </div>\r\n    </div>\r\n\r\n};\r\n\r\nListProducts.propTypes = {\r\n    id: PropTypes.string.isRequired,\r\n    back_id: PropTypes.string.isRequired,\r\n    // go: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ListProducts;\r\n","import {firstUpperCaseTrim} from \"./words\";\r\n\r\nexport const getTypes = (products, typesXlsx) => {\r\n    let types = {\r\n        age: [],\r\n        event: [],\r\n        hobby: [],\r\n        how: [],\r\n        relation: [],\r\n        sex: [],\r\n        profession: [],\r\n        active: [],\r\n    };\r\n    //console.log('typesXlsx-- ',typesXlsx);\r\n    // let types = {};\r\n    // keys.forEach((key) => {\r\n    //     types[key] = {}\r\n    // })\r\n\r\n    products.forEach((product) => {\r\n        Object.keys(product).forEach(key => {\r\n            if (types[key] !== undefined)\r\n                product[key].split(',').map(i => {\r\n                    const str = firstUpperCaseTrim(i)\r\n                    if(!!str) types[key].push(str)\r\n                });\r\n        })\r\n\r\n        // types.age.push(product.age.split(',').map(age=>firstUpperCaseTrim(age)));\r\n        //  types.event.push(product.event.split(',').map(event=>firstUpperCaseTrim(event)));\r\n        //  types.hobby.push(product.hobby.split(',').map(hobby=>firstUpperCaseTrim(hobby)));\r\n        //  types.how.push(product.how.split(',').map(how=>firstUpperCaseTrim(how)));\r\n        //  types.relation.push(product.relation.split(',').map(relation=>firstUpperCaseTrim(relation)));\r\n        //  types.sex.push(product.sex.split(',').map(sex=>firstUpperCaseTrim(sex)));\r\n        //  types.profession.push(product.profession.split(',').map(profession=>firstUpperCaseTrim(profession)));\r\n\r\n\r\n        // ages.forEach(age=> {\r\n        //     if (!types.age.includes(age) && age !== '') types.age.push(age)\r\n        // })\r\n    })\r\n    types.age = [...new Set(types.age.sort())]\r\n    types.event = [...new Set(types.event.sort())]\r\n    types.active = [...new Set(types.active.sort())]\r\n    types.hobby = [...new Set(types.hobby.sort())]\r\n    types.how = [...new Set(types.how.sort())]\r\n    // types.relation = [...new Set(types.relation.sort())]\r\n    types.sex = [...new Set(types.sex.sort())]\r\n    types.profession = [...new Set(types.profession.sort())]\r\n    //данные \"отношения\" берем из первого листа чтобы поделить на М и Ж\r\n\r\n    types.relation = typesXlsx.map((type) => {\r\n        if (type.relation !== undefined)\r\n           return  firstUpperCaseTrim(type.relation)\r\n    }).filter((type)=>!!type)\r\n\r\n\r\n    console.log(types);\r\n    return types;\r\n}\r\n\r\n\r\n//types{}\r\n// age: {1: \"От 0 до 5 лет\", 2: \"От 6 до 10 лет\", 3: \"От 11 до 16 лет\", 4: \"От 17 до 20 лет\", 5: \"От 21 до 30 лет\", 6: \"От 30 и старше\"}\r\n// event: {1: \"На выписку\", 2: \"На рождение ребенка\", 3: \"Юбилей\", 4: \"День рождения\", 5: \"Корпоратив\", 6: \"Новоселье\", 7: \"Годовщина\", 8: \"Выпускной\", 9: \"Мальчишник\", 10: \"Свадьба\"}\r\n// hobby: {1: \"Книголюбу\", 2: \"Музыканту\", 3: \"Охотнику\", 4: \"Спортсмену\", 5: \"Автомобилисту\", 6: \"Кулинару\", 7: \"Рукодельнику\", 8: \"Путешественнику\", 9: \"Садоводу\", 10: \"Любителю загородного отдыха\", 11: \"Туристу\", 12: \"Айтишнику\", 13: \"Футбольному болельщику\", 14: \"Рыбаку\", 15: \"Энтомологу\", undefined: \"Огороднику\"}\r\n// how: {1: \"По увлечениям\", 2: \"По профессии\", 3: \"Родственнику\", 4: \"Другу\", 5: \"На событие\"}\r\n// id: {1: \"1\", 2: \"2\", 3: \"3\", 4: \"4\", 5: \"5\", 6: \"6\", 7: \"7\", 8: \"8\", 9: \"9\", 10: \"10\", 11: \"11\", 12: \"12\", 13: \"13\", 14: \"14\", 15: \"15\"}\r\n// profession: {1: \"Доктору\", 2: \"Юристу\", 3: \"Учителю\", 4: \"Шефу\", 5: \"Бизнесмену\", 6: \"Коллеге\", 7: \"Айтишнику\", 8: \"Строителю\", 9: \"Военному\", 10: \"Моряку\", 11: \"Фитнес-тренеру\", 12: \"Швее\", 13: \"Повару\"}\r\n// relation: {1: \"Отец\", 2: \"Дедушка\", 3: \"Брат\", 4: \"Племянник\", 5: \"Дядя\", 6: \"Сын\", 7: \"Муж\", 8: \"Мать\", 9: \"Бабушка\", 10: \"Сестра\", 11: \"Племянница\", 12: \"Тётя\", 13: \"Дочь\", 14: \"Жена\"}\r\n// sex: {1: \"Мужчине\", 2: \"Женщине\"}\r\n//eventObj -- тестовый\r\n\r\n//products[]\r\n// age: \"от 11 до 16 лет, от 17 до 20 лет\"\r\n// event: \"День рождения, Выпускной\"\r\n// hobby: \"Рукодельнику\"\r\n// how: \"По увлечениям, Родственнику, Другу\"\r\n// id: \"2\"\r\n// img: \"457241941, 457241945, 457241937\"\r\n// name: \"Наборы для плетения из бисера\"\r\n// relation: \"Сестра, Племянница, Дочь\"\r\n// sex: \"Женщине\"","import React, {useEffect, useReducer} from 'react'\r\nimport View from '@vkontakte/vkui/dist/components/View/View';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport reducer from './reducer'\r\n//import connect from '@vkontakte/vk-connect';\r\nimport bridge from '@vkontakte/vk-bridge';\r\n\r\n\r\nimport Home from './panels/home';\r\n\r\nimport {Context} from './context'\r\nimport ScreenSpinner from \"@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner\";\r\nimport {getXLS} from \"./services/xlsx\";\r\nimport PanelItem from \"./panels/panel\";\r\nimport ListProducts from \"./panels/list_products\";\r\nimport {typeHow} from \"./services/filter_products\";\r\nimport {getTypes} from \"./services/types\";\r\nimport { checkPropTypes } from 'prop-types';\r\n//import {bounce} from '../../../node_modules/animate.css/animate.css';\r\n\r\nconst initialState = {\r\n    activePanel: 'home',\r\n    isOverflow:false,\r\n    panelOverflow:'',\r\n    fetchedUser: {\r\n        bdate: \"\",\r\n        city: {id: null, title: \"\"},\r\n        country: {id: 1, title: \"Россия\"},\r\n        first_name: \"\",\r\n        id: null,\r\n        last_name: \"\",\r\n        photo_100: \"\",\r\n        photo_200: \"\",\r\n        photo_max_orig: \"\",\r\n        sex: null,\r\n        timezone: null\r\n    },\r\n    popout: false,\r\n    error: '',\r\n    log:'',\r\n    types: {\r\n        how: [],\r\n        sex: [],\r\n        relation: [],\r\n        age: [],\r\n        profession: [],\r\n        hobby: [],\r\n        event: []\r\n    },\r\n    products: [],\r\n    filteredProducts: [],\r\n    indicators: {\r\n        sex: null,\r\n        relation: null,\r\n        age: null,\r\n        how: null,\r\n        profession: null,\r\n        hobby: null,\r\n        event: null,\r\n    }\r\n}\r\n\r\nconst App = () => {\r\n    const [state, dispatch] = useReducer(reducer, initialState);\r\n// console.log('state.products-- ',state.products);\r\n// console.log('state.indicators-- ',state.indicators);\r\n    // const go =  e => {\r\n    // \t dispatch({\r\n    // \t\ttype: 'setActivePanel',\r\n    // \t\tpayload: {\r\n    // \t\t\tactivePanel:e.currentTarget.dataset.to,\r\n    // \t\t}\r\n    // \t})\r\n    // };\r\n    //\r\n    // const setUser = user => {\r\n    // };\r\n\r\n    //get user info\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: 'setPopout',\r\n            payload: {\r\n                popout: true,\r\n            }\r\n        })\r\n        bridge.subscribe(({detail: {type, data}}) => {\r\n                if (type === 'VKWebAppUpdateConfig') {\r\n                    const schemeAttribute = document.createAttribute('scheme');\r\n                    // console.log('schemeAttribute-- ', schemeAttribute);\r\n                }\r\n            }\r\n        );\r\n     async function fetchUser() {\r\n         const user = await bridge.sendPromise('VKWebAppGetUserInfo');\r\n            dispatch({\r\n                type: 'setUser',\r\n                payload: {\r\n                    fetchedUser: user,\r\n                    popout: false,\r\n                }\r\n            })\r\n        }\r\n\r\n        fetchUser();\r\n    }, []);\r\n\r\n    //get characteristics of the products from xslx\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: 'setPopout',\r\n            payload: {\r\n                popout: true,\r\n            }\r\n        })\r\n\r\n        async function fetchData() {\r\n            const data = await getXLS();\r\n            const keys = Object.keys(data.types[0]);\r\n            // let types = {};\r\n            // keys.forEach((key) => {\r\n            //     types[key] = {}\r\n            // })\r\n            // data.types.forEach((type) => {\r\n            //     keys.forEach((key) => {\r\n            //         if (type[key] !== undefined)\r\n            //             types[key][type.id] = firstUpperCaseTrim(type[key])\r\n            //     })\r\n            // })\r\n            //console.log(data.types);\r\n            const types = getTypes(data.products, data.types)\r\n            // console.log('types-- ', types);\r\n            dispatch({\r\n                type: 'setTypes',\r\n                payload: {\r\n                    types: types,\r\n                    popout: false,\r\n                }\r\n            })\r\n            dispatch({\r\n                type: 'getAllProducts',\r\n                payload: {\r\n                    products: data.products,\r\n                    popout: false,\r\n                }\r\n            })\r\n        }\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    const getRelationsAtSex = () => {\r\n        let result = [], key;\r\n        for (key in state.types.relation) {\r\n            if (state.types.relation.hasOwnProperty(key) && (state.indicators.sex === 'Мужчине' ? +key <= 6 : +key > 6)) {\r\n                result.push(state.types.relation[key]);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n //console.log('data.types-- ', state.types);\r\n // console.log('data.products-- ',state.products);\r\n //console.log('state.ind-- ', state.indicators);\r\n    return (\r\n        <Context.Provider value={{\r\n            state, dispatch\r\n        }}>\r\n            <div className={state.isOverflow?\"container-height-auto\":\"container\"}>\r\n                <View activePanel={state.activePanel} popout={state.popout ? <ScreenSpinner size='large'/> : null}>\r\n                    <Home id='home' fetchedUser={state.fetchedUser}/>\r\n                    {/*<Whom id='sex'/>*/}\r\n                    {/*<WhoHave id='who_have'/>*/}\r\n                    {/*<Age id='age'/>*/}\r\n                    {/*<PanelItem id={'sex'} to_id={'sex'} title={''} />*/}\r\n                    <PanelItem id={'how'} to_id={'sex'}  back_id={'home'} title={'Как подобрать подарок?'}\r\n                               types={state.types.how}/>\r\n                    <PanelItem withHeader id={'sex'} back_id={'how'} to_id={'age'} title={'Кому ищем подарок?'}\r\n                               types={state.types.sex}/>\r\n                    <PanelItem withHeader id={'age'} back_id={'sex'}\r\n                               to_id={typeHow[state.indicators.how] || 'list_products'} title={'Сколько лет?'}\r\n                               types={state.types.age}/>\r\n                    <PanelItem withHeader id={'profession'} back_id={'age'} to_id={'list_products'} title={'Профессия?'}\r\n                               types={state.types.profession}/>\r\n                    <PanelItem withHeader id={'relation'} back_id={'age'} to_id={'list_products'} title={'Кем приходится?'}\r\n                               types={getRelationsAtSex()}/>\r\n                    <PanelItem withHeader id={'hobby'} back_id={'age'} to_id={'list_products'} title={'Увлечение?'}\r\n                               types={state.types.hobby}/>\r\n                    <PanelItem withHeader id={'event'} back_id={'age'} to_id={'list_products'} title={'Событие?'}\r\n                               types={state.types.event}/>\r\n                    <ListProducts id='list_products' back_id={typeHow[state.indicators.how] || 'age'}/>\r\n                </View>\r\n                <span className={'error'}>{state.error}</span>\r\n            </div>\r\n\r\n        </Context.Provider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n// panel_id: PropTypes.string.isRequired,\r\n// \twithHeader:PropTypes.bool,\r\n// \tback_id:PropTypes.string,\r\n// \tto_id:PropTypes.string.isRequired,\r\n// \ttitle:PropTypes.string.isRequired,\r\n// \taction:PropTypes.string.isRequired,\r\n// \tname:PropTypes.string.isRequired,\r\n// \ttypes:PropTypes.objectOf(PropTypes.string)\r\n\r\n\r\n// {id: {…}, how: {…}, sex: {…}, age: {…}, relation: {…}, …}\r\n// age: {1: \"от 0 до 10 лет\", 2: \"от 11 до 16 лет\", 3: \"от 17 до 20 лет\", 4: \"от 21 до 30 лет\", 5: \"от 30 и старше\"}\r\n// event: {1: \"На выписку\", 2: \"На рождение ребенка\", 3: \"Юбилей\", 4: \"День рождения\", 5: \"Корпоратив\", 6: \"Новоселье\", 7: \"Годовщина\", 8: \"Выпускной\", 9: \"Мальчишник\"}\r\n// hobby: {1: \"Книголюбу\", 2: \"Музыканту\", 3: \"Охотнику\", 4: \"Спортсмену\", 5: \"Автомобилисту\", 6: \"Кулинару\", 7: \"Рукодельнику\", 8: \"Путешественнику\", 9: \"Садоводу\", 10: \"Любителю загородного отдыха\", 11: \"Туристу\", 12: \"Айтишнику\", 13: \"Футбольному болельщику\", 14: \"Рыбаку\", 15: \"Энтомологу\"}\r\n// how: {1: \"По увлечениям\", 2: \"По профессии\", 3: \"Родственнику\", 4: \"Другу \\ подруге\", 5: \"На событие\"}\r\n// id: {1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10, 11: 11, 12: 12, 13: 13, 14: 14, 15: 15}\r\n// profession: {1: \"Доктору\", 2: \"Юристу\", 3: \"Учителю\", 4: \"Шефу\", 5: \"Бизнесмену\", 6: \"Коллеге\", 7: \"Айтишнику\", 8: \"Строителю\", 9: \"Военному\", 10: \"Моряку\"}\r\n// relation: {1: \"Отец\", 2: \"Дедушка\", 3: \"Брат\", 4: \"Племянник\", 5: \"Дядя\", 6: \"Сын\", 7: \"Муж\", 8: \"Мать\", 9: \"Бабушка\", 10: \"Сестра\", 11: \"Племянница\", 12: \"Тётя\", 13: \"Дочь\", 14: \"Жена\"}\r\n// sex: {1: \"Мужчине\", 2: \"Женщине\"}\r\n// __proto__: Object","import 'core-js/features/map';\r\nimport 'core-js/features/set';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n//import connect from '@vkontakte/vk-connect';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport App from './App';\r\n// import registerServiceWorker from './sw';\r\n\r\n// Init VK  Mini App\r\nbridge.send('VKWebAppInit');\r\n\r\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\r\n// расскомментируйте строку с registerServiceWorker();\r\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\r\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\r\n// registerServiceWorker();\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}