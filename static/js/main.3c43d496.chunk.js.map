{"version":3,"sources":["img/persik.png","reducer.js","context.js","core/BtnOutline.js","panels/home/index.js","services/xlsx.js","panels/panel/index.js","panels/list_products/components/item.js","services/words.js","services/filter_products.js","services/httpApiVk.js","panels/list_products/components/last_item.js","panels/list_products/index.js","services/httpOAuthVk.js","App.js","index.js"],"names":["module","exports","state","action","type","activePanel","payload","indicators","data","popout","error","fetchedUser","types","products","console","log","filteredProducts","Context","React","createContext","BtnOutline","props","size","level","onClick","handleClick","className","active","data-to","data_to","children","Home","dispatch","useContext","id","e","currentTarget","dataset","to","getXLS","axios","request","url","method","responseType","headers","Accept","then","response","Uint8Array","workbook","XLSX","typesWorksheet","Sheets","SheetNames","productsWorksheet","sheet_to_json","osName","platform","PanelItem","buttons","Object","values","map","val","key","setIndicators","to_id","withHeader","left","back_id","IOS","title","Product","product","count","item","give","buy","name","src","img_url","persik","alt","data-product","data-name","firstUpperCaseTrim","string","s","trim","toUpperCase","slice","typeHow","filterProducts","filter","lastFilter","undefined","how","charAt","isHow","isSex","isAge","split","i","length","sex","age","isEvent","event","isHobby","hobby","isProfession","profession","isRelation","relation","baseURL","access_token","handmade_id","params","fetchClient","create","httpApiVk","get","uri","queryParams","a","assign","post","jsonp","fn","photos","LastItem","again","redirectSiberiaHandmade","uriImg","ListProducts","useState","slideIndex","setSlide","connect","supports","send","img_fullname","scope","getImgs","err","message","forEach","photo","img","includes","sizes","useEffect","join","countProducts","before","slideWidth","align","onChange","window","parent","location","initialState","bdate","city","country","first_name","last_name","photo_100","photo_200","photo_max_orig","timezone","App","useReducer","reducer","sendPromise","user","subscribe","detail","schemeAttribute","document","createAttribute","fetchUser","keys","fetchData","Provider","value","result","hasOwnProperty","getRelationsAtSex","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3c43d496.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/persik.4e1ec840.png\";","export default (state, action) => {\n  switch (action.type) {\n    case \"setActivePanel\":\n      return {\n        ...state,\n        activePanel: action.payload.activePanel,\n          indicators:{\n              ...state.indicators,\n              ...action.payload.data\n          }\n      };\n    case \"setPopout\":\n      return {\n        ...state,\n        popout: action.payload.popout,\n          error: action.payload.error\n      }\n     case \"setUser\":\n      return {\n        ...state,\n        fetchedUser: action.payload.fetchedUser,\n        popout:action.payload.popout\n      }\n      case \"setIndicators\":\n          return {\n              ...state,\n              activePanel: action.payload.activePanel,\n              indicators:{\n                  ...state.indicators,\n                  ...action.payload.data\n              }\n          }\n     case \"setTypes\":\n      return {\n        ...state,\n          types: action.payload.types,\n          popout:action.payload.popout\n      }\n     case \"getAllProducts\":\n      return {\n        ...state,\n          products: action.payload.products,\n          popout:action.payload.popout\n      }\n      case \"getFilteredProducts\":\n          console.log('getFilteredProducts-- ',);\n          return {\n              ...state,\n              filteredProducts: action.payload.filteredProducts,\n              popout:action.payload.popout\n          }\n    default:\n        return {\n            ...state,\n            error: \"Такого метода не существует!\"\n        }\n  }\n}","import React from 'react'\n\nexport const Context = React.createContext()","import Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\n\nconst BtnOutline = props => (\n    <Button size='l' level=\"outline\" onClick={props.handleClick} className={props.active ? \"btn-primary\" : \"btn-white\"}\n            data-to={props.data_to}>\n        {props.children}\n    </Button>\n);\n\nBtnOutline.propTypes = {\n    data_to: PropTypes.string.isRequired,\n    handleClick: PropTypes.func.isRequired,\n    active: PropTypes.bool\n};\n\nexport default BtnOutline;","import React, {useContext} from 'react'\nimport {Context} from './../../context'\nimport PropTypes from 'prop-types';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport BtnOutline from \"../../core/BtnOutline\";\n\nconst Home = (props) => {\n\n    const {dispatch} = useContext(Context);\n\n    const go = e => {\n        dispatch({\n            type: 'setActivePanel',\n            payload: {\n                activePanel: e.currentTarget.dataset.to,\n            }\n        })\n    };\n\n   return <div id={props.id} className='wrapper bg-blue'>\n        {/*{fetchedUser &&*/}\n        {/*<Group title=\"User Data Fetched with VK Connect\">*/}\n        {/*    <Cell*/}\n        {/*        before={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}*/}\n        {/*        description={fetchedUser.city && fetchedUser.city.title ? fetchedUser.city.title : ''}*/}\n        {/*    >*/}\n        {/*        {`${fetchedUser.first_name} ${fetchedUser.last_name}`}*/}\n        {/*    </Cell>*/}\n        {/*</Group>}*/}\n\n\n\n        <Div className=''>\n            Не знаешь что подарить?\n        </Div>\n        <Div className=''>\n            мы вам поможем найти подарок\n        </Div>\n        <BtnOutline data_to=\"how\" handleClick={go}>\n            Найти подарок!\n        </BtnOutline>\n    </div>\n}\n\nHome.propTypes = {\n    id: PropTypes.string.isRequired,\n    // go: PropTypes.func.isRequired,\n    // fetchedUser: PropTypes.shape({\n    //     photo_200: PropTypes.string,\n    //     first_name: PropTypes.string,\n    //     last_name: PropTypes.string,\n    //     city: PropTypes.shape({\n    //         title: PropTypes.string,\n    //     }),\n    // }),\n};\n\nexport default Home;\n","import * as XLSX from 'xlsx';\nimport axios from \"axios\";\n\nexport const urlXlsxGoogle = \"https://docs.google.com/spreadsheets/d/1Oikpp2P8Tp4I8s4gIJEjK4rnR4WRIoG8SMyawtCifSs/export?format=xlsx\";\n// export const urlXlsxGoogleWrite = \"https://docs.google.com/spreadsheets/d/1Oikpp2P8Tp4I8s4gIJEjK4rnR4WRIoG8SMyawtCifSs/\";\n\nexport const getXLS = () => {\n    return axios.request({\n        url: urlXlsxGoogle,\n        method: 'get',\n        responseType: 'arraybuffer',\n        headers: {\n            Accept: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n        },\n    }).then((response) => {\n\n        const data = new Uint8Array(response.data);\n        const workbook = XLSX.read(data, {type: \"array\"});\n        const typesWorksheet = workbook.Sheets[workbook.SheetNames[0]];\n        const productsWorksheet = workbook.Sheets[workbook.SheetNames[1]];\n        const types = XLSX.utils.sheet_to_json(typesWorksheet);\n        const products = XLSX.utils.sheet_to_json(productsWorksheet);\n\n        return {types: types, products: products}\n    });\n}\n\n// export const logXlsx = ()=> {\n//     const wopts = {bookType: 'xlsx', bookSST: false, type: 'base64'};\n//\n//     axios.request({\n//         url: urlXlsxGoogleWrite,\n//         method: 'post',\n//         // headers: {\n//         //     Accept: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n//         // })\n//         data: JSON.stringify({\n//             \"range\": 'A1',\n//             \"values\": wopts\n//\n//         })\n//     }).then((response) => {\n// console.log('response-- ',response);\n//\n//     }).catch(err=>{\n//\n//         console.log('err-- ',err);\n//     })\n// }","import React, {useContext} from 'react';\nimport PropTypes from 'prop-types';\nimport {IOS, platform} from '@vkontakte/vkui';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport HeaderButton from '@vkontakte/vkui/dist/components/HeaderButton/HeaderButton';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\n\nimport './../../style.css';\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport BtnOutline from \"../../core/BtnOutline\";\nimport {Context} from \"../../context\";\n\nconst osName = platform();\n\nconst PanelItem = props => {\n    const {state, dispatch} = useContext(Context)\n\n    const setIndicators = (e, data) => {\n        dispatch({\n            type: 'setIndicators',\n            payload: {\n                data: data,\n                activePanel: e.currentTarget.dataset.to,\n            }\n        })\n    };\n\n    const go = e => {\n        dispatch({\n            type: 'setActivePanel',\n            payload: {\n                data:{[props.id]: null},\n                activePanel: e.currentTarget.dataset.to,\n            }\n        })\n    };\n\n    const buttons = Object.values(props.types).map((val) => <BtnOutline key={val}\n                                                                      handleClick={(e) => setIndicators(e, {[props.id]: val})}\n                                                                      data_to={props.to_id}\n                                                                      active={state.indicators[props.id] === val}>\n        {val}\n    </BtnOutline>)\n    return <Panel id={props.id}>\n        {props.withHeader && <PanelHeader left={\n            <HeaderButton onClick={go} data-to={props.back_id}>\n                {osName === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n            </HeaderButton>}\n        >\n        </PanelHeader>}\n        <Div className='wrapper bg-gray'>\n            <Div>{props.title}</Div>\n            {buttons}\n        </Div>\n    </Panel>\n}\n\nPanelItem.propTypes = {\n    id: PropTypes.string.isRequired,\n    withHeader: PropTypes.bool,\n    back_id: PropTypes.string,\n    to_id: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    types: PropTypes.objectOf(PropTypes.string)\n};\n\nexport default PanelItem;\n","import React from 'react'\nimport persik from \"../../../img/persik.png\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport PropTypes from 'prop-types';\n\nconst Product = props => {\n    const {product,count, item, give,buy}= props\n    return (\n        <div className=\"product\">\n            <div>Идея {item} из {count}:<br/> {product.name}</div>\n            <div>\n                <img className=\"img-product\" src={product.img_url || persik} alt=\"Persik The Cat\"/>\n            </div>\n            <div>\n                <Button size='l' level=\"outline\" className=\"btn-primary\" data-product={product.id} data-name={product.name} onClick={e=>buy(e)}>Где купить?</Button>\n                <Button size='l' level=\"outline\" className=\"btn-primary\" onClick={e=>give(e, product)}>Хочу себе!</Button>\n            </div>\n        </div>\n    )\n}\n\nProduct.propTypes = {\n    product:PropTypes.shape({\n        name: PropTypes.string.isRequired,\n        // img_url: PropTypes.string.isRequired,\n        id: PropTypes.number.isRequired\n    }),\n    count:PropTypes.number.isRequired,\n    item: PropTypes.number.isRequired,\n    buy : PropTypes.func.isRequired,\n    give: PropTypes.func.isRequired\n};\n\nexport default Product\n\n\n","export const firstUpperCaseTrim = (string) => {\n    const s = string.trim();\n    if(s === '') return '';\n    return s[0].toUpperCase() + s.slice(1);\n}","import {firstUpperCaseTrim} from \"./words\";\n\nexport const typeHow = {\n    'По увлечениям': 'hobby',\n    'По профессии': 'profession',\n    'Родственнику': 'relation',\n    // 'Другу': 'friend',\n    'На событие': 'event',\n}\n\n\nexport default class filterProducts {\n\n    static indicators;\n\n    static filter = (products, indicators) => {\n        this.indicators = indicators;\n        const filteredProducts = products.filter((product) => {\n            const lastFilter = typeHow[this.indicators.how] === undefined ? true : this[`is${typeHow[this.indicators.how].charAt(0).toUpperCase()}${typeHow[this.indicators.how].slice(1)}`](product);\n            // console.log('id-- ', product.id, lastFilter);\n            return this.isHow(product) && this.isSex(product) && this.isAge(product) && lastFilter\n        })\n        // console.log('filteredProducts-- ', filteredProducts);\n        return filteredProducts;\n    }\n\n    static isHow = (product) => {\n        // console.log('product.how-- ', product.how);\n        if (product.how === undefined) return true;\n        const how = product.how.split(',').filter((i) => this.indicators.how === firstUpperCaseTrim(i))\n        return how.length > 0;\n    }\n\n    static isSex = (product) => {\n        // console.log('product.sex-- ', product.sex);\n        if (product.sex === undefined) return true;\n        const sex = product.sex.split(',').filter((i) => this.indicators.sex=== firstUpperCaseTrim(i))\n        return sex.length > 0;\n    }\n\n    static isAge = (product) => {\n        // console.log('product.age-- ', product.age);\n        if (product.age === undefined) return true;\n        const age = product.age.split(',').filter((i) => this.indicators.age=== firstUpperCaseTrim(i))\n        return age.length > 0;\n    }\n\n    static isEvent = (product) => {\n        // console.log('product.event-- ', product.event);\n        if (product.event === undefined) return true;\n        const event = product.event.split(',').filter((i) => this.indicators=== firstUpperCaseTrim(i))\n        return event.length > 0;\n    }\n\n    static isHobby = (product) => {\n        // console.log('product.hobby-- ', product.hobby);\n        if (product.hobby === undefined) return true;\n        const hobby = product.hobby.split(',').filter((i) => this.indicators.hobby=== firstUpperCaseTrim(i))\n        return hobby.length > 0;\n    }\n\n    static isProfession = (product) => {\n        // console.log('product.profession-- ', product.profession);\n        if (product.profession === undefined) return true;\n        const profession = product.profession.split(',').filter((i) => this.indicators.profession=== firstUpperCaseTrim(i))\n        return profession.length > 0;\n    }\n\n    static isRelation = (product) => {\n        // console.log('product.relation-- ', product.relation);\n        if (product.relation === undefined) return true;\n        const relation = product.relation.split(',').filter((i) => this.indicators.relation=== firstUpperCaseTrim(i))\n        return relation.length > 0;\n    }\n}\n// id,name,img,sex,how,relation,profession,hobby,event,age,link,description\n\n// [0: {name: \"Скетчбук в авторской обложке\", img: \"457241933, 457241935, 457241932, 457241934 \", how: \"1,3,4\", relation: \"3, 4, 6, 10, 11, 13\", hobby: \"7\", …}]\n\n// how: \"\"\n// sex: null\n// age: null\n// event: null\n// hobby: null\n// profession: null\n// relation: null\n","import axios from 'axios';\nimport jsonp from 'jsonp';\n\n// const env = process.env.NODE_ENV !== 'production' ? 'ords' : 'dev';\n\n// const uriImg = `https://api.vk.com/method/photos.getById?access_token=470c6262470c6262470c62624a476171c74470c470c62621a81abc51a6bc2a2df1c0664`;\nconst baseURL = 'https://api.vk.com/method/'\nconst access_token = `470c6262470c6262470c62624a476171c74470c470c62621a81abc51a6bc2a2df1c0664`;\nexport const handmade_id = `176551026`;\n\nconst params = {\n    access_token: access_token,\n}\n\nconst fetchClient = axios.create({\n    baseURL: baseURL,\n});\n\nexport default class httpApiVk {\n\n    static get = async (uri, queryParams) => {\n        try {\n            return await fetchClient.get(uri, {params: Object.assign(queryParams, params)});\n        } catch (e) {\n            return e;\n        }\n    }\n\n    static post = async (uri, data) => {\n        // const instance = fetchClient();\n        console.log(uri, data);\n        try {\n            return await fetchClient.post(uri, data);\n        } catch (e) {\n            return e;\n        }\n    };\n\n    static jsonp = async (uri, queryParams, fn) => {\n        const url = `${baseURL}${uri}?access_token=${access_token}&photos=${queryParams.photos}&extended=0&photo_sizes=0&v=5.101`;\n        await jsonp(url, null, fn);\n    }\n}\n","import React from 'react'\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport PropTypes from 'prop-types';\n\nconst LastItem = props => {\n    const { again, redirectSiberiaHandmade}= props\n    return (\n        <div className=\"product\">\n            <div>Не нашли что искали?</div>\n\n            <div>\n                <Button size='l' level=\"outline\" className=\"btn-primary\" onClick={again}>Попробовать еще раз!</Button>\n                <Button size='l' level=\"outline\" className=\"btn-primary\" onClick={redirectSiberiaHandmade}>Подберите мне подарок!</Button>\n            </div>\n        </div>\n    )\n}\n\nLastItem.propTypes = {\n    again: PropTypes.func.isRequired,\n    redirectSiberiaHandmade: PropTypes.func.isRequired\n};\n\nexport default LastItem\n\n\n","import React, {useContext, useEffect, useState} from 'react'\nimport PropTypes from 'prop-types';\nimport {IOS, platform} from '@vkontakte/vkui';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport HeaderButton from '@vkontakte/vkui/dist/components/HeaderButton/HeaderButton';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport './../../style.css';\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport Gallery from \"@vkontakte/vkui/dist/components/Gallery/Gallery\";\nimport CellButton from \"@vkontakte/vkui/dist/components/CellButton/CellButton\";\nimport Icon24BrowserBack from '@vkontakte/icons/dist/24/browser_back';\nimport Icon24BrowserForward from '@vkontakte/icons/dist/24/browser_forward';\nimport {Context} from \"../../context\";\nimport Product from \"./components/item\";\nimport filterProducts from \"../../services/filter_products\";\nimport httpApiVk, {handmade_id} from \"../../services/httpApiVk\";\nimport LastItem from \"./components/last_item\";\nimport httpOAuthVk from \"../../services/httpOAuthVk\";\nimport connect from '@vkontakte/vk-connect';\n\nconst osName = platform();\n\nconst uriImg = 'photos.getById';\n\nconst ListProducts = props => {\n    const [slideIndex, setSlide] = useState(0);\n    const {state, dispatch} = useContext(Context)\n    let filteredProducts = {};\n\n    const go = e => {\n        dispatch({\n            type: 'setActivePanel',\n            payload: {\n                activePanel: props.back_id,\n            }\n        })\n    };\n\n    const give = async (e,product) => {\n        // const productPhoto = product.name;\n        // console.log('product_id-- ', product.id);\n        // const btn = e.currentTarget.innerText;\n        // console.log('btn-- ', e.currentTarget.innerText);\n        // // console.log('id_user-- ',state.user.id);\n        // console.log('time-- ', new Date().toLocaleString());\n        console.log('indicators--f ', state.indicators);\n        if (connect.supports(\"VKWebAppShowWallPostBox\")) {\n            connect.send(\"VKWebAppShowWallPostBox\",  {\"message\": `Сервис поиска подарков! Хочу себе ${product.name}!`,\"attachments\":`photo${product.img_fullname}, https://vk.com/siberia_handmade`} )\n        }\n    };\n\n    const buy = async e => {\n        // const productName = e.currentTarget.dataset.name;\n        // console.log('product_id-- ', e.currentTarget.dataset.product);\n        // const btn = e.currentTarget.innerText;\n        // console.log('btn-- ', e.currentTarget.innerText);\n        // // console.log('id_user-- ',state.user.id);\n        // console.log('time-- ', new Date().toLocaleString());\n        console.log('indicators--buy2 ', state.indicators);\n        // localStorage.setItem(`im_store_${state.fetchedUser.id}`, `{\"draft_-176551026\":{\"txt\":\"${btn} ${productName}\"}}`);\n        // window.location.href = 'https://vk.com/im?media=&sel=-176551026'\n        const scope = await connect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7148453, \"scope\": \"wall,friends\"});\n        console.log('log-- ',scope);\n    };\n\n    const again = e => {\n        console.log('again-- ');\n        dispatch({\n            type: 'setActivePanel',\n            payload: {\n                activePanel: 'home',\n            }\n        })\n    };\n    const redirectSiberiaHandmade = e => {\n        console.log('redirectSiberiaHandmade-- ');\n        window.parent.location = 'https://vk.com/siberia_handmade?w=app6887721_-176551026';\n    };\n\n    const getImgs = (err, data) => {\n        if (err) {\n            console.error(\"ERROR get images\", err.message);\n            dispatch({\n                type: 'setPopout',\n                payload: {\n                    popout: false,\n                    error: \"Ошибка подключения к серверу ВК!\"\n                }\n            })\n        } else {\n            console.log('data-- ', data);\n            // console.log('filteredProducts-- ', filteredProducts);\n            filteredProducts.map((product) => {\n                data.response.forEach(function (photo) {\n                    if (!!product.img && product.img.includes(photo.id)) {\n                        product.img_url = photo.sizes[3].url\n                    }\n                })\n                return product\n            })\n            dispatch({\n                type: 'getFilteredProducts',\n                payload: {\n                    filteredProducts: filteredProducts,\n                    popout: false,\n                }\n            })\n\n        }\n    }\n\n    //filter products\n    useEffect(() => {\n        dispatch({\n            type: 'setPopout',\n            payload: {\n                popout: true,\n            }\n        })\n\n        function filter() {\n            filteredProducts = filterProducts.filter(state.products, state.indicators);\n            const photos = filteredProducts.map((product) => {\n                if (!product.img) return '';\n                product.img_fullname = `-${handmade_id}_${product.img.split(',')[0].trim()}`\n                return product.img_fullname\n                // ((img_id) => {\n                //     return `-${handmade_id}_${img_id.trim()}`\n                // }).join(',')\n            }).join(',')\n            // console.log('photos-- ', photos);\n            if (!!photos) {\n                httpApiVk.jsonp(uriImg, {photos: photos}, getImgs)\n            } else {\n                dispatch({\n                    type: 'getFilteredProducts',\n                    payload: {\n                        filteredProducts: filteredProducts,\n                        popout: false,\n                    }\n                })\n            }\n\n        }\n\n        filter();\n    }, []);\n\n\n    const countProducts = state.filteredProducts.length;\n    const products = state.filteredProducts.map((product, i) => <Product give={give} buy={buy} key={i} item={++i}\n                                                                         product={product}\n                                                                         count={countProducts}/>)\n    console.log('slideIndex-- ', slideIndex);\n    console.log('countProducts-- ', countProducts);\n    console.log('state.filteredProducts-- ', state.filteredProducts);\n    return <Panel id={props.id}>\n        <PanelHeader\n            left={<HeaderButton onClick={go} data-to=\"age\">\n                {osName === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n            </HeaderButton>}\n        />\n        <div>\n            <Div className=\"title\">Мы кое-что нашли</Div>\n            <Div className={'slider-wrap'}>\n                {!!countProducts && slideIndex !== 0 &&\n                <CellButton className={\"slider-btn\"} onClick={() => setSlide(slideIndex === 0 ? 0 : slideIndex - 1)}\n                            before={<Icon24BrowserBack/>}/>}\n                <Div className={\"slider-gallery\"}>\n                    <Gallery\n                        className={\"gallery\"}\n                        slideWidth=\"98%\"\n                        align=\"center\"\n                        // style={{height: 150}}\n                        slideIndex={slideIndex}\n                        onChange={slideIndex => setSlide(slideIndex)}\n                    >\n                        {products}\n                        <LastItem again={again} redirectSiberiaHandmade={redirectSiberiaHandmade}/>\n\n                    </Gallery>\n                </Div>\n                {!!countProducts && countProducts !== slideIndex &&\n                <CellButton className={\"slider-btn\"} onClick={() => setSlide(slideIndex + 1)}\n                            before={<Icon24BrowserForward/>}/>}\n            </Div>\n\n        </div>\n    </Panel>\n\n};\n\nListProducts.propTypes = {\n    id: PropTypes.string.isRequired,\n    back_id: PropTypes.string.isRequired,\n    // go: PropTypes.func.isRequired,\n};\n\nexport default ListProducts;\n","import axios from 'axios';\n\n// const env = process.env.NODE_ENV !== 'production' ? 'ords' : 'dev';\n\n// const uriImg = `https://api.vk.com/method/photos.getById?access_token=470c6262470c6262470c62624a476171c74470c470c62621a81abc51a6bc2a2df1c0664`;\nconst baseURL = 'https://oauth.vk.com/authorize';\n\n// https://oauth.vk.com/authorize?client_id=470c6262470c6262470c62624a476171c74470c470c62621a81abc51a6bc2a2df1c0664&display=page&redirect_uri=http://localhost:10888&scope=messages&response_type=token&v=5.101&state=123456\n\n// https://oauth.vk.com/authorize?client_id=7148453&group_ids=176551026&display=page&redirect_uri=http://localhost:10888&scope=messages&response_type=token&v=5.101\n\n// https://oauth.vk.com/authorize?client_id=1&display=page&redirect_uri=http://example.com/callback&scope=friends&response_type=token&v=5.101&state=123456\n\nconst params = {\n    client_id: \"7148453\",\n    group_ids: \"176551026\",\n    display: \"popup\",\n    redirect_uri: \"http://localhost:10888/\",\n    scope: \"wall\",\n    response_type: 'token',\n    v: '5.101',\n}\nconst fetchClient = axios.create({\n    baseURL: baseURL,\n});\n\nexport default class httpOAuthVk {\n\n    static get = async (uri='', queryParams = {}) => {\n        try {\n            return await fetchClient.get(uri, {params: Object.assign(queryParams, params)});\n        } catch (e) {\n            return e;\n        }\n    }\n\n    // static post = async (uri, data) => {\n    //     // const instance = fetchClient();\n    //     console.log(uri, data);\n    //     try {\n    //         return await fetchClient.post(uri, data);\n    //     } catch (e) {\n    //         return e;\n    //     }\n    // };\n\n    // static jsonp = async (uri, queryParams, fn) => {\n    //     const url = `${baseURL}${uri}?access_token=${access_token}&photos=${queryParams.photos}&extended=0&photo_sizes=0&v=5.101`;\n    //     await jsonp(url, null, fn);\n    // }\n}\n","import React, {useEffect, useReducer} from 'react'\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport reducer from './reducer'\nimport connect from '@vkontakte/vk-connect';\n\n\nimport Home from './panels/home';\n\nimport {Context} from './context'\nimport ScreenSpinner from \"@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner\";\nimport {getXLS} from \"./services/xlsx\";\nimport PanelItem from \"./panels/panel\";\nimport ListProducts from \"./panels/list_products\";\nimport {typeHow} from \"./services/filter_products\";\nimport {firstUpperCaseTrim} from \"./services/words\";\n\nconst initialState = {\n    activePanel: 'home',\n    fetchedUser: {\n        bdate: \"\",\n        city: {id: null, title: \"\"},\n        country: {id: 1, title: \"Россия\"},\n        first_name: \"\",\n        id: null,\n        last_name: \"\",\n        photo_100: \"\",\n        photo_200: \"\",\n        photo_max_orig: \"\",\n        sex: null,\n        timezone: null\n    },\n    popout: false,\n    error: '',\n    types: {\n        how: {},\n        sex: {},\n        relation: {},\n        age: {},\n        profession: {},\n        hobby: {},\n        event: {}\n    },\n    products: [],\n    filteredProducts: [],\n    indicators: {\n        sex: null,\n        relation: null,\n        age: null,\n        how: '',\n        profession: null,\n        hobby: null,\n        event: null,\n    }\n}\n\nconst App = () => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n// console.log('state.products-- ',state.products);\n// console.log('state.indicators-- ',state.indicators);\n    // const go =  e => {\n    // \t dispatch({\n    // \t\ttype: 'setActivePanel',\n    // \t\tpayload: {\n    // \t\t\tactivePanel:e.currentTarget.dataset.to,\n    // \t\t}\n    // \t})\n    // };\n    //\n    const setUser = user => {\n\n    };\n\n    //get user info\n    useEffect(() => {\n        dispatch({\n            type: 'setPopout',\n            payload: {\n                popout: true,\n            }\n        })\n        connect.subscribe(({detail: {type, data}}) => {\n                if (type === 'VKWebAppUpdateConfig') {\n                    const schemeAttribute = document.createAttribute('scheme');\n                    console.log('schemeAttribute-- ', schemeAttribute);\n                }\n            }\n        );\n\n        async function fetchUser() {\n            const user = await connect.sendPromise('VKWebAppGetUserInfo');\n            dispatch({\n                type: 'setUser',\n                payload: {\n                    fetchedUser: user,\n                    popout: false,\n                }\n            })\n        }\n\n        fetchUser();\n    }, []);\n\n    //get characteristics of the products from xslx\n    useEffect(() => {\n        dispatch({\n            type: 'setPopout',\n            payload: {\n                popout: true,\n            }\n        })\n\n        async function fetchData() {\n            const data = await getXLS();\n            const keys = Object.keys(data.types[0]);\n            let types = {};\n            keys.forEach((key) => {\n                types[key] = {}\n            })\n            data.types.forEach((type) => {\n                keys.forEach((key) => {\n                    if (type[key] !== undefined)\n                        types[key][type.id] = firstUpperCaseTrim(type[key])\n                })\n            })\n            dispatch({\n                type: 'setTypes',\n                payload: {\n                    types: types,\n                    popout: false,\n                }\n            })\n            dispatch({\n                type: 'getAllProducts',\n                payload: {\n                    products: data.products,\n                    popout: false,\n                }\n            })\n        }\n\n        fetchData();\n    }, []);\n\n    const getRelationsAtSex = () => {\n        let result = {}, key;\n        for (key in state.types.relation) {\n            if (state.types.relation.hasOwnProperty(key) && (state.indicators.sex === 'Мужчине' ? +key <= 7 : +key > 7)) {\n                result[key] = state.types.relation[key];\n            }\n        }\n        return result;\n    }\n\n// console.log('i-- ',state.indicators);\n    return (\n        <Context.Provider value={{\n            state, dispatch\n        }}>\n            <div className=\"container\">\n                <View activePanel={state.activePanel} popout={state.popout ? <ScreenSpinner size='large'/> : null}>\n                    <Home id='home' fetchedUser={state.fetchedUser}/>\n                    {/*<Whom id='sex'/>*/}\n                    {/*<WhoHave id='who_have'/>*/}\n                    {/*<Age id='age'/>*/}\n                    {/*<PanelItem id={'sex'} to_id={'sex'} title={''} />*/}\n                    <PanelItem id={'how'} to_id={'sex'} title={'Как подобрать подарок?'}\n                               types={state.types.how}/>\n                    <PanelItem withHeader id={'sex'} back_id={'how'} to_id={'age'} title={'Кому ищем подарок?'}\n                               types={state.types.sex}/>\n                    <PanelItem withHeader id={'age'} back_id={'sex'}\n                               to_id={typeHow[state.indicators.how] || 'list_products'} title={'Сколько лет?'}\n                               types={state.types.age}/>\n                    <PanelItem withHeader id={'profession'} back_id={'age'} to_id={'list_products'} title={'Профессия?'}\n                               types={state.types.profession}/>\n                    <PanelItem withHeader id={'relation'} back_id={'age'} to_id={'list_products'}\n                               title={'Кем приходится?'}\n                               types={getRelationsAtSex()}/>\n                    <PanelItem withHeader id={'hobby'} back_id={'age'} to_id={'list_products'} title={'Увлечение?'}\n                               types={state.types.hobby}/>\n                    <PanelItem withHeader id={'event'} back_id={'age'} to_id={'list_products'} title={'Событие?'}\n                               types={state.types.event}/>\n                    <ListProducts id='list_products' back_id={typeHow[state.indicators.how] || 'age'}/>\n                </View>\n                <span className={'error'}>{state.error}</span>\n            </div>\n\n        </Context.Provider>\n    );\n}\n\nexport default App;\n// panel_id: PropTypes.string.isRequired,\n// \twithHeader:PropTypes.bool,\n// \tback_id:PropTypes.string,\n// \tto_id:PropTypes.string.isRequired,\n// \ttitle:PropTypes.string.isRequired,\n// \taction:PropTypes.string.isRequired,\n// \tname:PropTypes.string.isRequired,\n// \ttypes:PropTypes.objectOf(PropTypes.string)\n\n\n// {id: {…}, how: {…}, sex: {…}, age: {…}, relation: {…}, …}\n// age: {1: \"от 0 до 10 лет\", 2: \"от 11 до 16 лет\", 3: \"от 17 до 20 лет\", 4: \"от 21 до 30 лет\", 5: \"от 30 и старше\"}\n// event: {1: \"На выписку\", 2: \"На рождение ребенка\", 3: \"Юбилей\", 4: \"День рождения\", 5: \"Корпоратив\", 6: \"Новоселье\", 7: \"Годовщина\", 8: \"Выпускной\", 9: \"Мальчишник\"}\n// hobby: {1: \"Книголюбу\", 2: \"Музыканту\", 3: \"Охотнику\", 4: \"Спортсмену\", 5: \"Автомобилисту\", 6: \"Кулинару\", 7: \"Рукодельнику\", 8: \"Путешественнику\", 9: \"Садоводу\", 10: \"Любителю загородного отдыха\", 11: \"Туристу\", 12: \"Айтишнику\", 13: \"Футбольному болельщику\", 14: \"Рыбаку\", 15: \"Энтомологу\"}\n// how: {1: \"По увлечениям\", 2: \"По профессии\", 3: \"Родственнику\", 4: \"Другу \\ подруге\", 5: \"На событие\"}\n// id: {1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10, 11: 11, 12: 12, 13: 13, 14: 14, 15: 15}\n// profession: {1: \"Доктору\", 2: \"Юристу\", 3: \"Учителю\", 4: \"Шефу\", 5: \"Бизнесмену\", 6: \"Коллеге\", 7: \"Айтишнику\", 8: \"Строителю\", 9: \"Военному\", 10: \"Моряку\"}\n// relation: {1: \"Отец\", 2: \"Дедушка\", 3: \"Брат\", 4: \"Племянник\", 5: \"Дядя\", 6: \"Сын\", 7: \"Муж\", 8: \"Мать\", 9: \"Бабушка\", 10: \"Сестра\", 11: \"Племянница\", 12: \"Тётя\", 13: \"Дочь\", 14: \"Жена\"}\n// sex: {1: \"Мужчине\", 2: \"Женщине\"}\n// __proto__: Object","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}